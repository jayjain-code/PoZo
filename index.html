<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Po ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #ffe4e6;
            overflow-x: hidden;
        }
        
        .font-cute {
            font-family: 'Fredoka One', cursive;
        }

        .font-hand {
            font-family: 'Pacifico', cursive;
        }

        .bg-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .heart-bg {
            position: absolute;
            color: rgba(255, 182, 193, 0.4);
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(110vh) scale(0.5); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(-10vh) scale(1.2); opacity: 0; }
        }

        @keyframes bounce-excited {
            0%, 100% { transform: translateY(0) scale(1); }
            25% { transform: translateY(-20px) scale(1.1) rotate(-5deg); }
            50% { transform: translateY(0) scale(0.95) rotate(0deg); }
            75% { transform: translateY(-15px) scale(1.05) rotate(5deg); }
        }

        .animate-bounce-excited {
            animation: bounce-excited 0.8s infinite ease-in-out;
        }

        .modal-enter {
            animation: modalPop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes modalPop {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .btn-press:active {
            transform: scale(0.95);
        }
        
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 50;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen relative selection:bg-pink-200">

    <div id="bg-hearts-container" class="bg-hearts"></div>

    <!-- Audio Element with Autoplay -->
    <audio id="bg-music" loop preload="auto" autoplay>
        <source src="music.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Music Toggle Button -->
    <button id="music-btn" class="music-control bg-white/80 backdrop-blur-md p-3 rounded-full shadow-lg border-2 border-pink-300 text-pink-500 hover:scale-110 transition-transform btn-press" aria-label="Toggle Music">
        <div id="icon-container">
            <!-- Music Off Icon (Default state until played) -->
            <svg id="music-off-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path></svg>
        </div>
    </button>

    <div id="main-card" class="relative z-10 w-full max-w-md p-6 mx-4 transition-all duration-500 ease-in-out transform">
        <div class="bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border-4 border-pink-200 p-8 text-center relative overflow-hidden">
            
            <div class="absolute -top-6 -left-6 text-pink-300 transform -rotate-12">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
            </div>

            <div id="question-section" class="space-y-6">
                <div class="mb-4">
                    <span class="text-6xl animate-pulse">üíå</span>
                </div>
                
                <h1 class="text-3xl font-cute text-pink-600 mb-2">Hey Po,</h1>
                
                <p class="text-gray-700 text-lg leading-relaxed font-medium">
                    You make my world brighter and my heart happier every single day. From watching you make coffee in the morning to handling your eyerolls all day, you have made me the luckiest guy in the world. I love you so incredibly much!
                </p>

                <p class="text-2xl font-hand text-pink-500 font-bold py-4">
                    Will you be my Valentine?
                </p>

                <div class="flex flex-col sm:flex-row gap-4 justify-center items-center pt-2">
                    <button id="yes-btn" class="btn-press w-full sm:w-auto px-8 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white font-bold rounded-full shadow-lg hover:shadow-pink-300/50 hover:-translate-y-1 transition-all duration-200 text-xl flex items-center justify-center gap-2 group">
                        <span>Yes!</span>
                        <svg class="w-5 h-5 group-hover:animate-bounce" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path></svg>
                    </button>
                    
                    <button id="no-btn" class="btn-press w-full sm:w-auto px-8 py-3 bg-white border-2 border-pink-200 text-pink-400 font-bold rounded-full shadow-sm hover:bg-pink-50 transition-all duration-200 text-lg">
                        No
                    </button>
                </div>
            </div>

            <div id="success-section" class="hidden flex-col items-center justify-center space-y-6 py-4">
                <h1 class="text-4xl font-cute text-pink-600 animate-bounce-excited">YIPPEE!!! üéâ</h1>
                
                <div class="relative w-48 h-48 animate-bounce-excited">
                    <svg viewBox="0 0 200 200" class="w-full h-full drop-shadow-lg">
                        <circle cx="100" cy="110" r="60" fill="#a78bfa" />
                        <circle cx="60" cy="70" r="20" fill="#a78bfa" />
                        <circle cx="140" cy="70" r="20" fill="#a78bfa" />
                        <circle cx="60" cy="70" r="12" fill="#8b5cf6" />
                        <circle cx="140" cy="70" r="12" fill="#8b5cf6" />
                        <circle cx="80" cy="100" r="6" fill="#1f2937" />
                        <circle cx="120" cy="100" r="6" fill="#1f2937" />
                        <circle cx="70" cy="115" r="8" fill="#fda4af" opacity="0.6" />
                        <circle cx="130" cy="115" r="8" fill="#fda4af" opacity="0.6" />
                        <ellipse cx="100" cy="115" rx="14" ry="10" fill="white" />
                        <ellipse cx="100" cy="112" rx="6" ry="4" fill="#1f2937" />
                        <path d="M 90 120 Q 100 130 110 120" stroke="#1f2937" stroke-width="2" fill="none" />
                        <path d="M 50 110 Q 30 70 50 50" stroke="#a78bfa" stroke-width="12" stroke-linecap="round" fill="none" />
                        <path d="M 150 110 Q 170 70 150 50" stroke="#a78bfa" stroke-width="12" stroke-linecap="round" fill="none" />
                    </svg>
                </div>

                <div class="text-xl text-gray-700 font-medium">
                    See you on Valentine's Day! <br> 
                    <span class="text-sm text-pink-400">(I knew you'd say yes ‚ù§Ô∏è)</span>
                </div>
            </div>

        </div>
    </div>

    <div id="custom-modal" class="fixed inset-0 z-50 flex items-center justify-center px-4 hidden">
        <div class="absolute inset-0 bg-black/20 backdrop-blur-sm" id="modal-backdrop"></div>
        <div class="bg-white rounded-2xl p-6 shadow-2xl max-w-sm w-full relative z-10 modal-enter text-center border-4 border-pink-300">
            <div class="text-5xl mb-4">ü§®</div>
            <h3 class="text-xl font-bold text-gray-800 mb-2">Excuse me?</h3>
            <p class="text-gray-600 mb-6">
                Error 404: The "No" option is currently out of stock. You love me too much for that! Try the other button. üòâ
            </p>
            <button id="close-modal" class="w-full py-2 bg-pink-500 hover:bg-pink-600 text-white rounded-xl font-bold transition-colors">
                Okay, fine! üôÑ
            </button>
        </div>
    </div>

    <script>
        function triggerHaptic(pattern) {
            if (navigator.vibrate) navigator.vibrate(pattern);
        }

        const musicBtn = document.getElementById('music-btn');
        const bgMusic = document.getElementById('bg-music');
        const iconContainer = document.getElementById('icon-container');
        
        // Icons
        const musicOffIcon = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path></svg>`;
        const musicOnIcon = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg>`;

        let isMusicPlaying = false;

        bgMusic.src = "music.mp3"; 
        bgMusic.volume = 0.5;

        function updateMusicIcon(playing) {
            if (playing) {
                iconContainer.innerHTML = musicOnIcon;
                musicBtn.classList.add('bg-pink-100');
                musicBtn.classList.remove('bg-white/80');
            } else {
                iconContainer.innerHTML = musicOffIcon;
                musicBtn.classList.remove('bg-pink-100');
                musicBtn.classList.add('bg-white/80');
            }
        }

        // AUTO-PLAY LOGIC
        // Browsers often block autoplay. This code tries to play, and if blocked,
        // waits for the FIRST interaction to start the music.
        window.addEventListener('load', () => {
            bgMusic.play().then(() => {
                isMusicPlaying = true;
                updateMusicIcon(true);
            }).catch(error => {
                console.log("Autoplay prevented. Waiting for interaction.");
                // Add a one-time listener to the whole document to start music on first click
                const playOnInteraction = () => {
                    bgMusic.play();
                    isMusicPlaying = true;
                    updateMusicIcon(true);
                    // Remove listener so it doesn't fire again
                    document.removeEventListener('click', playOnInteraction);
                    document.removeEventListener('touchstart', playOnInteraction);
                };
                
                document.addEventListener('click', playOnInteraction);
                document.addEventListener('touchstart', playOnInteraction);
            });
        });

        // Error handling if file is missing
        bgMusic.addEventListener('error', function(e) {
            console.error("Music error:", e);
            if (isMusicPlaying) {
                alert("‚ö†Ô∏è Music File Not Found!\n\nPlease make sure:\n1. The song file is named 'music.mp3' (lowercase).\n2. It is in the EXACT same folder as this HTML file.");
                isMusicPlaying = false;
                updateMusicIcon(false);
            }
        }, true);

        // Manual Toggle Button
        musicBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent triggering the global interaction listener again
            triggerHaptic(20);
            
            if (isMusicPlaying) {
                bgMusic.pause();
                isMusicPlaying = false;
                updateMusicIcon(false);
            } else {
                bgMusic.play().then(() => {
                    isMusicPlaying = true;
                    updateMusicIcon(true);
                }).catch(error => {
                    alert("Click the page once to enable audio!");
                });
            }
        });

        // Background Animation
        function createHearts() {
            const container = document.getElementById('bg-hearts-container');
            const heartCount = 20;
            for(let i = 0; i < heartCount; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart-bg');
                heart.innerHTML = '‚ù§Ô∏è';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
                heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
                heart.style.animationDelay = (Math.random() * 5) + 's';
                container.appendChild(heart);
            }
        }
        createHearts();

        const yesBtn = document.getElementById('yes-btn');
        const noBtn = document.getElementById('no-btn');
        const mainCard = document.getElementById('main-card');
        const questionSection = document.getElementById('question-section');
        const successSection = document.getElementById('success-section');
        const modal = document.getElementById('custom-modal');
        const closeModal = document.getElementById('close-modal');
        const modalBackdrop = document.getElementById('modal-backdrop');

        noBtn.addEventListener('click', () => {
            triggerHaptic(50);
            modal.classList.remove('hidden');
        });

        const hideModal = () => {
            triggerHaptic(20);
            modal.classList.add('hidden');
        };

        closeModal.addEventListener('click', hideModal);
        modalBackdrop.addEventListener('click', hideModal);

        yesBtn.addEventListener('click', () => {
            triggerHaptic([100, 50, 100, 50, 400]);

            const duration = 3000;
            const end = Date.now() + duration;

            const frame = () => {
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#ff69b4', '#ff1493', '#ffb6c1']
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#ff69b4', '#ff1493', '#ffb6c1']
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            };
            frame();

            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#ff69b4', '#ff1493', '#ffb6c1']
            });

            questionSection.style.display = 'none';
            successSection.classList.remove('hidden');
            successSection.classList.add('flex');
            
            mainCard.classList.add('animate-bounce-excited');
            setTimeout(() => {
                mainCard.classList.remove('animate-bounce-excited');
            }, 1000);
        });
    </script>
</body>
</html>
